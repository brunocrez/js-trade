{"version":3,"sources":["../../app-es6/controllers/TradeController.js"],"names":["TradeController","$","document","querySelector","bind","_inputDate","_inputQuantity","_inputValue","_tradeView","TradeView","_tradeList","Bind","TradeList","_messageView","MessageView","_message","Message","_tradeService","TradeService","_init","listAllTrades","then","tradeList","forEach","addToList","trade","catch","message","err","setInterval","importTrades","event","preventDefault","newTrade","_createTradeObject","addTrade","_resetForm","list","trades","clearAllTrades","clearList","Trade","DateHelper","stringToDate","value","parseInt","parseFloat","focus"],"mappings":"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","file":"TradeController.js","sourcesContent":["class TradeController {\r\n\r\n    constructor() {\r\n        let $ = document.querySelector.bind(document);\r\n\r\n        this._inputDate = $('#date');\r\n        this._inputQuantity = $('#quantity');\r\n        this._inputValue = $('#value');\r\n\r\n        this._tradeView = new TradeView($('#tradeView'));\r\n        this._tradeList = new Bind(new TradeList(), this._tradeView, 'addToList', 'clearList');\r\n\r\n        this._messageView = new MessageView($('#messageView'));\r\n        this._message = new Bind(new Message(), this._messageView, 'message');\r\n\r\n        this._tradeService = new TradeService();\r\n        this._init();\r\n    }\r\n\r\n    _init() {\r\n        this._tradeService\r\n            .listAllTrades()\r\n            .then(tradeList => tradeList.forEach(trade => this._tradeList.addToList(trade)))\r\n            .catch(err => this._message.message = err);\r\n\r\n        setInterval(() => {\r\n            this.importTrades();\r\n        }, 5000);\r\n    }\r\n\r\n    addTrade(event) {\r\n        event.preventDefault();\r\n        const newTrade = this._createTradeObject();\r\n\r\n        this._tradeService\r\n            .addTrade(newTrade)\r\n            .then(message => {\r\n                this._tradeList.addToList(newTrade);\r\n                this._message.message = message;\r\n                this._resetForm();\r\n            })\r\n            .catch(err => this._message.message = err);\r\n    }\r\n\r\n    importTrades() {\r\n        this._tradeService\r\n            .importTrades(this._tradeList.list)\r\n            .then(trades => trades.forEach(trade => {\r\n                this._tradeList.addToList(trade);\r\n                this._message.message = 'Items Imported Successfully!';\r\n            }))\r\n            .catch(err => this._message.message = err);\r\n    }\r\n\r\n    clearTrades() {\r\n        this._tradeService\r\n            .clearAllTrades()\r\n            .then(message => {\r\n                this._message.message = message;\r\n                this._tradeList.clearList();\r\n            })\r\n            .catch(message => this._message.message = message);\r\n    }\r\n\r\n    _createTradeObject() {\r\n        return new Trade(\r\n            DateHelper.stringToDate(this._inputDate.value),\r\n            parseInt(this._inputQuantity.value),\r\n            parseFloat(this._inputValue.value)\r\n        );\r\n    }\r\n\r\n    _resetForm() {\r\n        this._inputDate.value = '';\r\n        this._inputQuantity.value = 1;\r\n        this._inputValue.value = 0.0;\r\n\r\n        this._inputDate.focus();\r\n    }\r\n}"]}