{"version":3,"sources":["../../app-es6/controllers/TradeController.js"],"names":["Bind","TradeView","MessageView","TradeService","Trade","TradeList","Message","DateHelper","TradeController","$","document","querySelector","bind","_inputDate","_inputQuantity","_inputValue","_tradeView","_tradeList","_messageView","_message","_tradeService","_init","listAllTrades","then","tradeList","forEach","addToList","trade","catch","message","err","setInterval","importTrades","event","preventDefault","newTrade","_createTradeObject","addTrade","_resetForm","list","trades","clearAllTrades","clearList","stringToDate","value","parseInt","parseFloat","focus"],"mappings":"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","file":"TradeController.js","sourcesContent":["import { Bind } from '../helpers/Bind';\r\nimport { TradeView } from '../views/TradeView';\r\nimport { MessageView } from '../views/MessageView';\r\nimport { TradeService } from '../services/TradeService';\r\nimport { Trade } from '../models/Trade';\r\nimport { TradeList } from '../models/TradeList';\r\nimport { Message } from '../models/Message';\r\nimport { DateHelper } from '../helpers/DateHelper';\r\n\r\nexport class TradeController {\r\n\r\n    constructor() {\r\n        let $ = document.querySelector.bind(document);\r\n\r\n        this._inputDate = $('#date');\r\n        this._inputQuantity = $('#quantity');\r\n        this._inputValue = $('#value');\r\n\r\n        this._tradeView = new TradeView($('#tradeView'));\r\n        this._tradeList = new Bind(new TradeList(), this._tradeView, 'addToList', 'clearList');\r\n\r\n        this._messageView = new MessageView($('#messageView'));\r\n        this._message = new Bind(new Message(), this._messageView, 'message');\r\n\r\n        this._tradeService = new TradeService();\r\n        this._init();\r\n    }\r\n\r\n    _init() {\r\n        this._tradeService\r\n            .listAllTrades()\r\n            .then(tradeList => tradeList.forEach(trade => this._tradeList.addToList(trade)))\r\n            .catch(err => this._message.message = err);\r\n\r\n        setInterval(() => {\r\n            this.importTrades();\r\n        }, 5000);\r\n    }\r\n\r\n    addTrade(event) {\r\n        event.preventDefault();\r\n        const newTrade = this._createTradeObject();\r\n\r\n        this._tradeService\r\n            .addTrade(newTrade)\r\n            .then(message => {\r\n                this._tradeList.addToList(newTrade);\r\n                this._message.message = message;\r\n                this._resetForm();\r\n            })\r\n            .catch(err => this._message.message = err);\r\n    }\r\n\r\n    importTrades() {\r\n        this._tradeService\r\n            .importTrades(this._tradeList.list)\r\n            .then(trades => trades.forEach(trade => {\r\n                this._tradeList.addToList(trade);\r\n                this._message.message = 'Items Imported Successfully!';\r\n            }))\r\n            .catch(err => this._message.message = err);\r\n    }\r\n\r\n    clearTrades() {\r\n        this._tradeService\r\n            .clearAllTrades()\r\n            .then(message => {\r\n                this._message.message = message;\r\n                this._tradeList.clearList();\r\n            })\r\n            .catch(message => this._message.message = message);\r\n    }\r\n\r\n    _createTradeObject() {\r\n        return new Trade(\r\n            DateHelper.stringToDate(this._inputDate.value),\r\n            parseInt(this._inputQuantity.value),\r\n            parseFloat(this._inputValue.value)\r\n        );\r\n    }\r\n\r\n    _resetForm() {\r\n        this._inputDate.value = '';\r\n        this._inputQuantity.value = 1;\r\n        this._inputValue.value = 0.0;\r\n\r\n        this._inputDate.focus();\r\n    }\r\n}"]}